<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Simulador: Relaciones y Funciones</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>
<div id="app">
  <div id="topbar">
    <select id="mode">
      <option value="sagital">Diagrama Sagital (Relación)</option>
      <option value="numeric">Función Numérica (f: A → B)</option>
      <option value="ordered">Pares Ordenados</option>
    </select>

    <div id="controls">
      <!-- Topbar numeric function input (shown only in numeric mode) and ordered-pairs input (shown only in ordered mode) -->
      <div id="numericTop" style="display:none;display:flex;gap:8px;align-items:center;">
        <input id="fnTopInput" placeholder="f(x) = 2*x+1" aria-label="Expresión f(x)" style="height:34px;border-radius:8px;border:1px solid rgba(0,0,0,0.06);padding:0 8px;background:#fff;font-weight:600;">
        <button id="applyFnTop" title="Aplicar función" aria-label="Aplicar función" style="height:34px;border-radius:8px;padding:0 10px;font-weight:700;background:linear-gradient(90deg,var(--accent-4),var(--accent-3));">Aplicar</button>
      </div>

      <div id="orderedTop" style="display:none;display:flex;flex-direction:column;gap:8px;align-items:flex-start;">
        <div style="display:flex;gap:8px;align-items:center;">
          <input id="pairA" placeholder="a" aria-label="a" style="height:34px;border-radius:8px;border:1px solid rgba(0,0,0,0.06);padding:0 8px;background:#fff;font-weight:600;width:88px;">
          <input id="pairB" placeholder="b" aria-label="b" style="height:34px;border-radius:8px;border:1px solid rgba(0,0,0,0.06);padding:0 8px;background:#fff;font-weight:600;width:88px;">
          <button id="addPairBtn" title="Agregar" aria-label="Agregar" style="height:34px;border-radius:8px;padding:0 10px;font-weight:700;background:linear-gradient(90deg,var(--accent-2),var(--accent-1));">Agregar</button>
          <button id="genSagitalFromPairs" title="Diagrama Sagital" aria-label="Diagrama Sagital" style="height:34px;border-radius:8px;padding:0 10px;font-weight:700;background:linear-gradient(90deg,var(--accent-4),var(--accent-3));">Diagrama Sagital</button>
        </div>
        <!-- Display ordered-pairs set -->
        <div id="pairsDisplay" aria-live="polite" style="font-weight:700;color:#10325b;font-size:13px;padding:6px 8px;border-radius:8px;background:linear-gradient(90deg,rgba(211,229,255,0.06),rgba(255,250,240,0.02));min-width:220px;">
          R = {}
        </div>
      </div>

      <button id="addDomain" title="Agregar elemento Dominio" aria-label="Agregar elemento Dominio">
        <svg class="icon" viewBox="0 0 24 24" role="img" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <defs>
            <linearGradient id="g1" x1="0" x2="1"><stop offset="0" stop-color="#fff7e6"/><stop offset="1" stop-color="#fff"/></linearGradient>
          </defs>
          <circle cx="8" cy="12" r="7" fill="url(#g1)" stroke="#d38f48" stroke-width="1.6"/>
          <path d="M8 9v6M5 12h6" stroke="#d38f48" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
          <rect x="14" y="8.5" width="6" height="7" rx="1.4" fill="#ffd9a6" stroke="#d38f48" stroke-width="1.2"/>
        </svg>
      </button>
      <button id="addRange" title="Agregar elemento Rango" aria-label="Agregar elemento Rango">
        <svg class="icon" viewBox="0 0 24 24" role="img" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <defs>
            <linearGradient id="g2" x1="0" x2="1"><stop offset="0" stop-color="#f0fff8"/><stop offset="1" stop-color="#fff"/></linearGradient>
          </defs>
          <rect x="14" y="6.5" width="7" height="11" rx="3" fill="url(#g2)" stroke="#1f7d68" stroke-width="1.6"/>
          <circle cx="8" cy="12" r="6" fill="#c9f4d3" stroke="#1f7d68" stroke-width="1.2"/>
          <path d="M6.5 12h3" stroke="#1f7d68" stroke-width="1.6" stroke-linecap="round"/>
        </svg>
      </button>
      <button id="connect" title="Conectar" aria-label="Conectar">
        <svg class="icon" viewBox="0 0 24 24" role="img" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path d="M3 12h6" stroke="#10325b" stroke-width="1.8" stroke-linecap="round"/>
          <path d="M15 12h6" stroke="#10325b" stroke-width="1.8" stroke-linecap="round"/>
          <g transform="translate(8,12)">
            <circle cx="0" cy="0" r="2.6" fill="#e9c46a" stroke="#10325b" stroke-width="1.1"/>
            <circle cx="6" cy="0" r="2.6" fill="#2a9d8f" stroke="#10325b" stroke-width="1.1"/>
            <path d="M2 0 L4 0" stroke="#10325b" stroke-width="1.2" stroke-linecap="round"/>
          </g>
        </svg>
      </button>
      <button id="clear" title="Limpiar" aria-label="Limpiar">
        <svg class="icon" viewBox="0 0 24 24" role="img" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <rect x="4" y="5" width="16" height="3" rx="1" fill="#fff5f7" stroke="#f6b1c3" stroke-width="1.4"/>
          <path d="M7 9v8a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9" fill="#fff" stroke="#b24a63" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M10 12v4M14 12v4" stroke="#b24a63" stroke-width="1.6" stroke-linecap="round"/>
          <circle cx="18" cy="7" r="0.9" fill="#b24a63"/>
        </svg>
      </button>
      <button id="generate" title="Generar Ejercicio" aria-label="Generar Ejercicio">
        <svg class="icon" viewBox="0 0 24 24" role="img" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <rect x="5.5" y="7.5" width="13" height="9.5" rx="2" fill="#fffef6" stroke="#ffd9a6" stroke-width="1.4"/>
          <path d="M8.5 11.5l2 2 4-4" stroke="#1f7d68" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
          <line x1="4" y1="5.5" x2="20" y2="5.5" stroke="#10325b" stroke-width="1.2" stroke-linecap="round"/>
          <circle cx="18.5" cy="9" r="1.6" fill="#d3e5ff" stroke="#10325b" stroke-width="1"/>
        </svg>
      </button>

      <button id="checkFunction" title="Comprobar si es función" aria-label="Comprobar si es función" style="display:none;">
        Comprobar función
      </button>

    </div>
  </div>

  <div id="workspace">
    <canvas id="canvas"></canvas>
    <div id="side">
      <div class="panel">
        <h4>Lista Dominio</h4>
        <ul id="domainList"></ul>
        <h4>Lista Rango</h4>
        <ul id="rangeList"></ul>
      </div>

      <div class="panel">
        <h4>Propiedades</h4>
        <div id="props"></div>
      </div>

      <div class="panel" id="numericPanel" hidden>
        <h4>Función Numérica</h4>
        <label>Definir f(x): <input id="fnExpr" placeholder="ej: 2*x+1"></label>
        <button id="applyFn">Aplicar</button>
      </div>
    </div>
  </div>

  <div id="footer">
    <input id="exerciseText" placeholder="Descripción breve del ejercicio..." />
    <button id="addExercise">Exportar</button>
  </div>
</div>

<script type="module" src="app.js"></script>
</body>
</html>